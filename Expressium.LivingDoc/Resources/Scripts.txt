    <script>
        function loadScenario(x) {
            var featureId = x.getAttribute('data-featureid');
            var scenarioId = x.getAttribute('data-scenarioid');
            var feature = document.getElementById(featureId).innerHTML;
            var scenario = document.getElementById(scenarioId).innerHTML;

            document.getElementById('right-section').innerHTML = feature + scenario;
        }
    </script>
    <script>
        function loadFeature(x) {
            var featureId = x.getAttribute('data-featureid');
            var feature = document.getElementById(featureId).innerHTML;
            var table = document.getElementById("project-view");
            var tr = table.getElementsByTagName("tr");

            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");

                if (role == "scenario") {
                    var parentId = tr[i].getAttribute('data-featureid');
                    if (featureId == parentId) {
                        var scenarioId = tr[i].getAttribute('data-scenarioid');
                        feature = feature.concat(document.getElementById(scenarioId).innerHTML);
                    }
                }
            }

            document.getElementById('right-section').innerHTML = feature;

            var rules = document.getElementById('right-section').querySelectorAll('[data-rule-replica]');
            for (var i = 0; i < rules.length; i++)
                rules[i].style.display = "none";
        }
    </script>
    <script>
        function loadViewmode(x, y) {
            var listview = document.getElementById(x).innerHTML;

            document.getElementById('list-view').innerHTML = listview;

            var exists = document.getElementById('view-title');
            if (exists)
                document.getElementById('view-title').innerHTML = y;

            var navLinks = document.querySelectorAll('.navigation-link');
            for (var i = 0; i < navLinks.length; i++) {
                if (navLinks[i].textContent == y)
                    navLinks[i].classList.add('navigation-active');
                else
                    navLinks[i].classList.remove('navigation-active');
            }

            filterView();
            loadAnalytics();
        }
    </script>
    <script>
        function loadAnalytics() {
            var navLinkActive = document.querySelectorAll('a.navigation-link.navigation-active');
            if (navLinkActive.length > 0) {
                var name = navLinkActive[0].textContent.toLowerCase();

                if (name == "overview") {
                    var analytics = document.getElementById("analytics-scenarios").innerHTML;
                    document.getElementById('right-section').innerHTML = analytics;
                } else {
                    var analytics = document.getElementById("analytics-" + name).innerHTML;
                    document.getElementById('right-section').innerHTML = analytics;
                }
            }
            else {
                var analytics = document.getElementById("analytics-scenarios").innerHTML;
                document.getElementById('right-section').innerHTML = analytics;
            }
        }
    </script>
    <script>
        function filterView() {
            var navLinkActive = document.querySelectorAll('a.navigation-link.navigation-active');
            if (navLinkActive.length > 0) {
                name = navLinkActive[0].textContent.toLowerCase();

                if (name == "overview") {
                    filterDataByRole("scenario");
                    filterDataFeatures();
                    filterDataFolders();
                }
                else if (name == "features") {
                    filterDataByRole("feature");
                }
                else if (name == "scenarios") {
                    filterDataByRole("scenario");
                }
                else if (name == "steps") {
                    filterDataByRole("step");
                }
                else {
                }
            }
        }
    </script>
    <script>
        function filterDataByRole(roleType) {
            var input = document.getElementById("scenario-filter");
            var filterTokens = input.value.toUpperCase().split(/\s+/);
            var table = document.getElementById("table-list");
            var tr = table.getElementsByTagName("tr");

            var statuses = [];
            var prefilters = document.getElementsByTagName("button");
            for (var i = 0; i < prefilters.length; i++) {
                var prefilter = prefilters[i].getAttribute("data-prefilter");
                var active = prefilters[i].className.includes(" active");
                if (active) {
                    statuses.push(prefilter);
                }
            }

            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");
                var tags = tr[i].getAttribute("data-tags");
                var td = tr[i].getElementsByTagName("td");
                var rowText = "";
                var found = false;

                if (role == null)
                    continue;

                if (role != roleType)
                    continue;

                for (var j = 0; j < td.length; j++) {
                    rowText += td[j].textContent.toUpperCase() + " ";
                }

                var tagTokens = tags.toUpperCase().split(/\s+/);
                for (var t = 0; t < tagTokens.length; t++) {
                    rowText += tagTokens[t].toUpperCase() + " ";
                }

                found = filterTokens.every(token => rowText.includes(token));

                var hasPrefilter = false;
                for (var t = 0; t < statuses.length; t++) {
                    var prefilter = statuses[t];
                    if (rowText.includes(prefilter.toUpperCase())) {
                        hasPrefilter = true;
                    }
                }

                if (statuses.length > 0 && !hasPrefilter) {
                    found = false;
                }

                tr[i].style.display = found ? "" : "none";
            }
        }
    </script>
    <script>
        function filterDataFeatures() {
            var table = document.getElementById("table-list");
            var tr = table.getElementsByTagName("tr");

            // Hide all features first
            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");

                if (role == "feature")
                    tr[i].style.display = "none";
            }

            var features = [];

            // Collect all features that have visible scenarios
            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");

                if (role == "scenario") {
                    if (tr[i].style.display == "") {
                        var parent = tr[i].getAttribute("data-parent");
                        features.push(parent);
                    }
                }
            }

            // Show features that have visible scenarios
            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");

                if (role == "feature") {
                    var name = tr[i].getAttribute("data-name");
                    if (features.includes(name))
                        tr[i].style.display = "";
                }
            }

            // Collapse scenarios under features if the feature is collapsed
            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");
                if (role == "feature") {
                    if (tr[i].style.display == "") {
                        var featureId = tr[i].getAttribute('data-featureid');
                        var collapse = tr[i].getAttribute('data-collapse');
                        if (collapse == "true") {
                            for (var g = 0; g < tr.length; g++) {
                                var scenarioRole = tr[g].getAttribute("data-role");
                                if (scenarioRole == "scenario") {
                                    var featureIdSlave = tr[g].getAttribute('data-featureid');
                                    if (featureId == featureIdSlave) {
                                        tr[g].style.display = "none";
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    </script>
    <script>
        function filterDataFolders() {
            var table = document.getElementById("table-list");
            var tr = table.getElementsByTagName("tr");

            var features = table.querySelectorAll('[data-role="feature"]');

            // Display all folder first and reset attributes
            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");

                if (role == "folder") {
                    tr[i].style.display = "";
                    tr[i].setAttribute('has-folders', 'false');
                    tr[i].setAttribute('has-features', 'false');
                }
            }

            var foldersDataParents = [];

            // Collect all folders that have visible features
            for (var i = 0; i < features.length; i++) {
                if (features[i].style.display == "") {
                    var parent = features[i].getAttribute("data-parent");
                    foldersDataParents.push(parent);
                }
            }

            // Set folders that have visible features
            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");

                if (role == "folder") {
                    var name = tr[i].getAttribute("data-name");
                    if (foldersDataParents.includes(name))
                        tr[i].setAttribute('has-features', 'true');
                }
            }

            // Set folders that have subsequent folders
            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");

                if (role == "folder") {
                    var folderPath = tr[i].getAttribute('data-name');

                    for (var s = 0; s < tr.length; s++) {
                        var srole = tr[s].getAttribute("data-role");

                        if (srole == "folder") {
                            var sfolderPath = tr[s].getAttribute('data-name');
                            if (sfolderPath != folderPath) {
                                if (sfolderPath.startsWith(folderPath)) {
                                    tr[i].setAttribute('has-folders', 'true');
                                }
                            }
                        }                       
                    }
                }
            }

            // Hide folders that have invisible folders and features
            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");

                if (role == "folder") {
                    var hasFolders = tr[i].getAttribute('has-folders');
                    var hasFeatures = tr[i].getAttribute('has-features');
                    if (hasFolders == "false" && hasFeatures == "false")
                        tr[i].style.display = "none";
                }
            }

            // Hide folders that have no visible subfolders
            filterSubFolder(tr);
            filterSubFolder(tr);
        }
    </script>
    <script>
        function filterSubFolder(tr) {
            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");
                if (role == "folder") {
                    var hasFolders = tr[i].getAttribute('has-folders');
                    var hasFeatures = tr[i].getAttribute('has-features');
                    if (hasFolders == "true" && hasFeatures == "false") {
                        var folderPath = tr[i].getAttribute('data-name');

                        var hasVisibleSubfolders = false;

                        for (var s = 0; s < tr.length; s++) {
                            var srole = tr[s].getAttribute("data-role");
                            if (srole == "folder") {
                                var sfolderPath = tr[s].getAttribute('data-name');
                                if (sfolderPath != folderPath) {
                                    if (sfolderPath.startsWith(folderPath)) {
                                        if (tr[s].style.display == "") {
                                            hasVisibleSubfolders = true;
                                        }
                                    }
                                }
                            }                       
                        }

                        if (!hasVisibleSubfolders) {
                            tr[i].style.display = "none";
                        }
                    }
                }
            }
        }
    </script>
    <script>
        function sortTableByColumn(n) {
            var table = document.getElementById("table-grid");
            var count = 0;
            var switching = true;
            var direction = "ascending";

            while (switching) {
                switching = false;
                var rows = table.rows;

                for (var i = 1; i < (rows.length - 1); i++) {
                    var Switch = false;

                    var x = rows[i].getElementsByTagName("td")[n];
                    var y = rows[i + 1].getElementsByTagName("td")[n];

                    if (direction == "ascending") {

                        if (x.innerHTML.toLowerCase() >
                            y.innerHTML.toLowerCase()) {

                            Switch = true;
                            break;
                        }
                    } else if (direction == "descending") {

                        if (x.innerHTML.toLowerCase() <
                            y.innerHTML.toLowerCase()) {

                            Switch = true;
                            break;
                        }
                    }
                }
                if (Switch) {
                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;

                    count++;
                } else {
                    if (count == 0 && direction == "ascending") {
                        direction = "descending";
                        switching = true;
                    }
                }
            }
        }
    </script>
    <script>
        function sortTableByColumnByAttibute(n, a) {
            var table = document.getElementById("table-grid");
            var count = 0;
            var switching = true;

            var direction = "ascending";

            while (switching) {
                switching = false;
                var rows = table.rows;

                for (var i = 1; i < (rows.length - 1); i++) {
                    var Switch = false;

                    var x = rows[i].getElementsByTagName("td")[n];
                    var y = rows[i + 1].getElementsByTagName("td")[n];

                    if (direction == "ascending") {

                        if (x.getAttribute(a) >
                            y.getAttribute(a)) {

                            Switch = true;
                            break;
                        }
                    } else if (direction == "descending") {

                        if (x.getAttribute(a) <
                            y.getAttribute(a)) {

                            Switch = true;
                            break;
                        }
                    }
                }
                if (Switch) {
                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;

                    count++;
                } else {
                    if (count == 0 && direction == "ascending") {
                        direction = "descending";
                        switching = true;
                    }
                }
            }
        }
    </script>
    <script>
        function loadEditor() {
            var editor = document.getElementById('editor-view').innerHTML;

            document.getElementById('right-section').innerHTML = editor;

            document.getElementById("scenario-script").value = "";
            document.getElementById("scenario-script").value += "@TA-??? @Review";
            document.getElementById("scenario-script").value += "\nScenario: Successfully Creating a new Gherkin Script";
        }
    </script>
    <script>
        function filterStepDefinitions() {
            var input = document.getElementById("stepdefinition-filter");
            var filterTokens = input.value.toUpperCase().split(/\s+/);
            var table = document.getElementById("steps-table-list");
            var tr = table.getElementsByTagName("tr");

            var numberOfFound = 0;

            for (var i = 0; i < tr.length; i++) {
                var td = tr[i].getElementsByTagName("td");
                var rowText = "";
                var found = false;

                for (var j = 0; j < td.length; j++) {
                    rowText += td[j].textContent.toUpperCase() + " ";
                }

                found = filterTokens.every(token => rowText.includes(token));

                if (found)
                    numberOfFound++;

                if (numberOfFound >= 6)
                    found = false;

                tr[i].style.display = found ? "" : "none";
            }
        }
    </script>
    <script>
        function loadStepDefinition(row) {
            var link = row.querySelector("td a");
            var linkText = link.textContent || link.innerText;

            var script = document.getElementById("scenario-script").value;
            if (script.endsWith("\n") || script === "") {
                document.getElementById("scenario-script").value += "    " + linkText;
            } else {
                document.getElementById("scenario-script").value += "\n    " + linkText;
            }
        }
    </script>
    <script>
        function loadStepDefinitionByEnter() {
            var table = document.getElementById("steps-table-list");
            var tr = table.getElementsByTagName("tr");

            for (var i = 0; i < tr.length; i++) {
                if (tr[i].style.display == "") {
                    loadStepDefinition(tr[i]);
                    break;
                }
            }

            document.getElementById("stepdefinition-filter").value = "";
        }
    </script>
    <script>
        function editorCopy() {
            var copyText = document.getElementById("scenario-script");
            navigator.clipboard.writeText(copyText.value);
        }
    </script>
    <script>
        function loadCollapse(x) {
            var collapse = x.getAttribute('data-collapse');
            var parent = x.parentElement;

            if (collapse == "false") {
                x.innerHTML = "<span class='feature-expand'>&#11208;</span>";
                x.setAttribute('data-collapse', 'true');
                parent.setAttribute('data-collapse', 'true');
            } else {
                x.innerHTML = "<span class='feature-expand'>&#11206;</span>";
                x.setAttribute('data-collapse', 'false');
                parent.setAttribute('data-collapse', 'false');
            }

            filterView();
        }
    </script>
    <script>
        function loadCollapseAll() {
            var table = document.getElementById("table-list");
            var tr = table.getElementsByTagName("tr");

            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");

                if (role == "feature") {
                    var cells = tr[i].getElementsByTagName("td");

                    for (var a = 0; a < cells.length; a++) {
                        var collapse = cells[a].getAttribute('data-collapse');

                        if (collapse == "false") {
                            cells[a].innerHTML = "&#11208;";
                            cells[a].setAttribute('data-collapse', 'true');
                            tr[i].setAttribute('data-collapse', 'true');
                        }
                    }
                }
            }

            filterView();
        }
    </script>
    <script>
        function loadExpandAll() {
            var table = document.getElementById("table-list");
            var tr = table.getElementsByTagName("tr");

            for (var i = 0; i < tr.length; i++) {
                var role = tr[i].getAttribute("data-role");

                if (role == "feature") {
                    var cells = tr[i].getElementsByTagName("td");

                    for (var a = 0; a < cells.length; a++) {
                        var collapse = cells[a].getAttribute('data-collapse');

                        if (collapse == "true") {
                            cells[a].innerHTML = "&#11206;";
                            cells[a].setAttribute('data-collapse', 'false');
                            tr[i].setAttribute('data-collapse', 'false');
                        }
                    }
                }
            }

            filterView();
        }
    </script>
    <script>
        function togglePrefilter(x) {
            var attribute = x.className;

            if (attribute.includes(" active")) {
                x.className = x.className.replace(" active", "");
            } else {
                x.className += " active";
            }

            filterView();
        }
    </script>
    <script>
        function clearPrefilters() {
            var prefilters = document.getElementsByTagName("button");
            for (var i = 0; i < prefilters.length; i++) {
                var prefilter = prefilters[i].getAttribute("data-prefilter");
                var active = prefilters[i].className.includes(" active");
                if (active) {
                    prefilters[i].className = prefilters[i].className.replace(" active", "");
                }
            }

            var input = document.getElementById("scenario-filter");
            input.value = '';

            filterView();
        }
    </script>
    <script>
        function toggleAttachments(x) {
            var grandParent = x.parentElement?.parentElement;
            if (!grandParent) return;

            var attachments = grandParent.getElementsByClassName('attachments');
            for (var i = 0; i < attachments.length; i++) {
                if (attachments[i].style.display === "none") {
                    attachments[i].style.display = "block";
                } else {
                    attachments[i].style.display = "none";
                }
            }

            var stacktraces = grandParent.getElementsByClassName('stacktraces');
            for (var i = 0; i < stacktraces.length; i++) {
                if (stacktraces[i].style.display === "none") {
                    stacktraces[i].style.display = "block";
                } else {
                    stacktraces[i].style.display = "none";
                }
            }
        }
    </script>
    <script>
        function editorCopy() {
            var textArea = document.getElementById("scenario-script");
            textArea.select();
            navigator.clipboard.writeText(textArea.value);
            window.getSelection().removeAllRanges();
        }
    </script>